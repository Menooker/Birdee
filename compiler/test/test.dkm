require Remote
dim time as int=GetClock()
dim n as int=1000000000
dim threads as int=2
dim node_num as int=2
/*

single_thread()
println( GetClock()-time)
time=GetClock()
*/

dim hosts as string[]={"192.168.88.1","192.168.88.1"}
dim ports as int[]={3020,3030}
//dim hosts as string[]=new string[0]
//dim ports as int[]=new int[0]
dim mem_hosts as string[]={"192.168.88.1"}
dim mem_ports as int[]={11211}
dim nodes as RemoteNode[]=ConnectNode(5080,hosts,ports,mem_hosts,mem_ports)

dim p as shared int[] global=new int[100] global
nodes[0].CreateThread(threadproc,0)
nodes[1].CreateThread(threadproc,1)


function threadproc(id as var) as int
unsafe
	println("HI")
	p[id]=0
	println(p[id])
	p[id]=id+100
end

gets()
println(p[0])
println(p[1])
nodes[0].Close()
nodes[1].Close()


