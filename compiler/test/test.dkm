require Remote

shared class clsa
	public ca as int
	public cb as string
end

gets()
dim hosts as string[]={"127.0.0.1"}
dim ports as int[]={3020}
dim mem_hosts as string[]={"127.0.0.1","127.0.0.1"}
dim mem_ports as int[]={11211,11211}
dim nodes as RemoteNode[]=ConnectNode(hosts,ports,mem_hosts,mem_ports)

dim a as shared int=1
dim b as shared string

dim t as RemoteThread=nodes[0].CreateThread(myproc,2)
t.Join(-1,1000)
nodes[0].Close()
println(nodes[0].host+","+nodes[0].port)
gets()
println(a)


function myproc ( par as var) as int

	println(a)
	a++
end
