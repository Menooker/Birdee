require Remote


class bbb : Object
	public ba as int
end

shared class clsa
	public ca as int
	public cb as string
end

function myproc ( par as var) as int
	println(c.cb+c.ca)
	println(par)
	c.ca++
	Sleep(1000)
end


dim a as shared int=1
dim b as shared string
dim cnt as AtomicCounter=new AtomicCounter()
cnt.Set(2)
println("Set2 "+cnt.Get())
println("Inc2 "+cnt.Inc(2))
println("Dec100 "+cnt.Dec(100))

dim static as int
static@+=1
println(static)
dim k as bbb=new bbb()
k.ba@+=2
println(k.ba)

b="KKKK"
println(b)

dim c as shared clsa=new clsa()
c.ca=1
c.cb="l"
println(c.cb+c.ca)


gets()
dim node as RemoteNode=ConnectNode("127.0.0.1",3020)
dim t as RemoteThread=node.CreateThread(myproc,2)
t.Join(-1,1000)
node.Close()
println(node.host+","+node.port)
gets()
println(c.ca)

