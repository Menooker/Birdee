# Birdee
Birdee is a new programming language based on LLVM, aiming to support cross-platform execution. However, now it only runs on Windows.  This project is originally based on 'diksam'.
To build or browse Birdee's source code, Visual Studio or Code::Blocks are recommended (both of them can be obtained for free by the official).
"/Birdee/Birdee.sln" is the Visual Studio solution file. And "/Birdee/Birdee/Birdee.cbp" is the Code::Blocks project file. Both project files can generate Birdee's executable file, but some features are only available when Birdee is compiled by MinGW (or GCC).

# How to compile
Birdee can be compiled by two different IDEs, while both ways differ slightly.

##First thing first
 * The distributed memory system of Birdee is based on libmemcached. You should first build the libmemcached library. In windows, a ready-to-compile Visual Studio libmemcached project file is available (FIX-ME : add URL). After compiling the project, you can have the files "libmemcached.lib","libmemcached.dll" and "libmemcached.def".
 * Collect all the header files of libmemcached. Create a folder called libmemcached at the parent folder of the root folder of Birdee project. Copy all ".h" files to the newly created folder. Create a folder called "memcached" in folder "libmemcached", put "protocol_binary.h" into it.
 * Link/Copy the file "inttypes.h" (which you can find in the libmemcached VS project) into the parent folder of the root folder of Birdee project.
 * Link/Copy the files "libmemcached.lib","libmemcached.dll" and "libmemcached.def" at the folder above.
 * (If you are going to compile Birdee with mingw/Codeblocks) You can find "dlltool" at "mingw/bin". Use the tool by the command "dlltool --dllname libmemcached.dll --def libmemcached.def --output-lib libmemcached.a" at the folder above to create gcc style static lib.

## Build Birdee with Visual Studio
You should first fetch and compile LLVM (version 3.4.2). Here is a tutorial for compiling a static LLVM library which is needed by Birdee. 
[a tutorial for compiling LLVM into a  static lib(Chinese)](http://blog.csdn.net/myjisgreat/article/details/46486723)
There are still some more things to do after you get the static library "libLLVMLite.lib".
 * Link/Copy the directory "llvm-3.4.2.src/include" to the same directory holding the root directory of the source code of Birdee. (For example, if the Birdee source code is in directory 'Birdee-src', and the parent directory of 'Birdee-src' is 'codes', then put the 'include' directory into 'codes')
 * After using cmake to configure the LLVM source code, you will get a VisualStudio Project directory. Link/Copy the directory "include" in the project directory to the same diectory above, re-naming as 'include2'.
 * Link/Copy the static library "libLLVMLite.lib" to the to the same diectory above.
Then open the Visual Studio solution file "/Birdee/Birdee.sln". Now you should be able to compile and run Birdee with Visual Studio!

## Build Birdee in Code::Blocks
As the Visual Studio approach of compiling Birdee, building Birdee with Code::Blocks also need a static library of LLVM compiled by GCC or MinGW (version 3.4.2).
To build LLVM with MinGW, the following steps are to be taken.
 * Use cmake to make the CodeBlocks project files for LLVM. 
 * In cmake, choose the path to the project files generated by cmake. (in this tutorial, the path is chosen as "c:\llvm_cb")
 * Click "configure" and choose the generator "CodeBlocks - MinGW makefiles" and "Use default native compilers"
 * Click "Generate" to make the CodeBlocks project files for LLVM
 * Open c:\llvm_cb\LLVM.cbp
 * Compile this project
 * Create a ".bat" file at "c:\llvm_cb\lib"
 * Put the following lines in the ".bat" file. (Note that "ar.exe" can be found at "path\to\CodeBlocks\MinGW\bin", you should either replace all of the occurence of "ar.exe" with the full path of it or add "path\to\CodeBlocks\MinGW\bin" to the "path" environment variable.)
 ```bat
   ar.exe x libLLVMCore.a
   
   ar.exe x libLLVMCodeGen.a
   
   ar.exe x libLLVMExecutionEngine.a
   
   ar.exe x libLLVMTarget.a
   
   ar.exe x libLLVMJIT.a
   
   ar.exe x libLLVMScalarOpts.a
   
   ar.exe x libLLVMSupport.a
   
   ar.exe x libLLVMAnalysis.a
   
   ar.exe x libLLVMMC.a
   
   ar.exe x libLLVMX86AsmParser.a
   
   ar.exe x libLLVMX86AsmPrinter.a
   
   ar.exe x libLLVMX86Desc.a
   
   ar.exe x libLLVMX86Info.a
   
   ar.exe x libLLVMX86Utils.a
   
   ar.exe x libLLVMX86CodeGen.a
   
   ar.exe x libLLVMSelectionDAG.a
   
   ar.exe x libLLVMObject.a
   
   ar.exe x libLLVMTransformUtils.a
   
   ar.exe x libLLVMBitWriter.a 
   
   ar.exe x libLLVMBitReader.a
   
   ar.exe x libLLVMMCJIT.a
   
   ar.exe x libLLVMRuntimeDyld.a
   
   ar.exe x libLLVMAsmPrinter.a
   
   ar.exe x libLLVMAsmParser.a
   
   ar.exe x libLLVMMCParser.a
   
   ar x libLLVMBitReader.a

   ar x libLLVMBitWriter.a

   ar.exe rcs libLLVMLite.a *.obj ./CodeGen/CMakeFiles/LLVMCodeGen.dir/Analysis.cpp.obj
   
   del *.obj
   
   pause
```
 * Execute the ".bat" file, and "libLLVMLite.a" should be ready at "lib" directory.

After the static library is obtained, a few more steps should be done to compile Birdee.
 * Link/Copy the directory "llvm-3.4.2.src/include" to the same directory holding the root directory of the source code of Birdee. (For example, if the Birdee source code is in directory 'Birdee-src', and the parent directory of 'Birdee-src' is 'codes', then put the 'include' directory into 'codes')
 * Link/Copy the directory "c:\llvm_cb\include" in the project directory to the same diectory above, re-naming as 'include3'.
 * Link/Copy the static library "libLLVMLite.a" to the to the same diectory above.

Then open "\Birdee\Birdee\Birdee.cbp", and everything should be okay to build Birdee!
